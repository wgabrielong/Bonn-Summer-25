\section{Lecture 4 -- 23rd May 2025}\label{sec: lecture 4}
Using the gluing procedure of (\ref{eqn: gluing map Frobenius}) allows us to correct for the overspecification of prescribing a local algebra $R^{(m)}$ for each positive integer $m$ in characteristic $p$ -- that is, gluing $R^{(m)},R^{(m')}$ where $m_{0}$ is coprime to $p$ and $m=m_{0}p^{a},m'=m_{0}p^{b}$ using the Frobenius. 

More generally, we can define the Habiro ring of a smooth framed $\ZZ$-algebra $(R,\square)$ by passing to the limit of the rings $R_{n}$ where there are surjective transition maps $R_{pm}\to R_{m}$ given by the (necessarily unique) lift of the isomorphism (\ref{eqn: gluing map Frobenius}) along the (necessarily unique) deformation of \'{e}tale algebras $R^{(m)}$ to $R_{m}$.  
\begin{definition}[Habiro Ring of Framed Algebra]\label{def: Habiro ring of framed algebra}
    Let $(R,\square)$ be a smooth framed $\ZZ$-algebra. The Habiro ring $\Hcal_{(R,\square)}$ is given by the limit 
    $$\Hcal_{(R,\square)}=\lim_{n\in\NN}R_{n}$$
    where $R_{n}$ is the completed root of unity algebra of \Cref{def: completed root of unity algebra}. 
\end{definition}
Analogously, we can define $q$-connections.
\begin{definition}[$q$-Connections over Habiro Ring]\label{def: q-connection over Habiro ring}
    Let $(R,\square)$ be a smooth framed $\ZZ$-algebra and $\Hcal_{(R,\square)}$ its Habiro ring. A module with modified $q$-connection over $\Hcal_{(R,\square)}$ is a $\Hcal_{(R,\square)}$-module $M$ with commuting $\gamma_{i}$-semilinear maps $\gamma_{i,M}:M\to M$. 
\end{definition}
\begin{proposition}\label{prop: explicit elements of HR}
    Let $(R,\square)$ be a smooth framed $\ZZ$-algebra. The Habiro ring $\Hcal_{(R,\square)}$ of $(R,\square)$ is given by 
    {\footnotesize
    \begin{equation}\label{eqn: Habiro ring of framed algebra}
        \Hcal_{(R,\square)}=\left\{(f_{m})_{m\geq 1}\in\prod_{m\geq 1}R^{(m)}[[q-\zeta_{m}]]:\substack{\forall m\in\NN,\text{ }\forall p\text{ prime} \\\varphi_{p}(f_{pm})=f_{m}\in (R^{(m)})_{p}^{\wedge}[[q-\zeta_{m}]]\cong (R^{(pm)})_{p}^{\wedge}[[q-\zeta_{pm}]]}\right\}
    \end{equation}
    \normalsize}where $\varphi_{p}$ lifts the Frobenius on $R^{(m)}/(p)$ by raising each variable to the $p$-th power and fixes $q$ and $\zeta_{m}$. 
\end{proposition}
\begin{remark}
    There is an obvious map from the Habiro ring of the torus \Cref{def: Habiro ring of base} $\Hcal_{\ZZ[\underline{T}^{\pm}]}\to\Hcal_{(R,\square)}$ endowing the Habiro ring of $(R,\square)$ with the structure of a(n \'{e}tale) $\Hcal_{\ZZ[\underline{T}^{\pm}]}$-algebra.  
\end{remark}
Let us consider some explicit elements of the Habiro ring. 
\begin{example}\label{ex: element of Habiro ring}\marginpar{The lecture contained a fairly substantive sketch of the proof \Cref{ex: element of Habiro ring}, which the author has defered to \Cref{appdx: explicit elements} for continuity of exposition.}
    Let $R=\ZZ[T_{1},\dots,T_{d},\frac{1}{1-T_{1}-\dots-T_{d}}]$ with framing $\square:\ZZ[T_{1},\dots,T_{d}]\to R$. The element 
    $$\sum_{k_{1},\dots,k_{d}\geq0}\left[\substack{k_{1}+\dots+k_{d} \\ k_{1}\text{ }\dots\text{ }k_{d}}\right]_{q}T_{1}^{k_{1}}\dots T_{d}^{k_{d}}\in\ZZ[q][[\underline{T}]]$$
    is an element of the Habiro ring $\Hcal_{(R,\square)}$ where 
    $$\left[\substack{k_{1}+\dots+k_{d} \\ k_{1}\text{ }\dots\text{ }k_{d}}\right]_{q}=\frac{(q;q)_{k_{1}+\dots+k_{d}}}{(q;q)_{k_{1}}\dots(q;q)_{k_{d}}}$$
    is the $q$-deformation of the multinomial $\binom{k_{1}+\dots+k_{d}}{k_{1}\dots k_{d}}$. More generally, explicit elements of the Habiro ring can be constructed by considering $q$-deformations of rational functions (vis. \Cref{ex: legendre family} and surrounding discussion). 
\end{example}
Returning to a discussion of Habiro cohomology of a smooth $\ZZ$-algebra with framing $\square:\spec(R)\to(\GG_{m})^{d}$, we recall that there are lifts of the automorphism $\gamma_{i}$ to $\Hcal_{(R,\square)}$: more explicitly, for a section $(f_{m})_{m\geq0}$, the action $\gamma_{i}$ acts by $(f_{m})_{m\geq1}\mapsto (\gamma_{i}^{(m)}(f_{m}))_{m\geq1}$ where $\gamma_{i}^{(m)}$ is the automorphism given in \Cref{def: root of unity algebra}. This produces a $\ZZ^{d}$-action on $\Hcal_{(R,\square)}$, and we can define Habiro-Hodge cohomology to be the group cohomology of the action of $\ZZ^{d}$ on $\Hcal_{(R,\square)}$. 
\begin{definition}[$q$-Habiro-Hodge Cohomology]\label{def: q-Habiro-Hodge cohomology}
    Let $(R,\square)$ be a smooth framed $\ZZ$-algebra. The $q$-Habiro-Hodge cohomology is the cohomology of the $q$-Habiro-Hodge complex $q\dash\HHdg_{(R,\square)}$ given by 
    \begin{equation}\label{eqn: q-Habiro-Hodge complex}
        \Hcal_{(R,\square)}\xrightarrow{(\gamma_{i}-1)_{i=1}^{d}}\bigoplus_{i=1}^{d}\Hcal_{(R,\square)}\xrightarrow{(\gamma_{i}-1)_{i=1}^{d}}\bigoplus_{i<j}\Hcal_{(R,\square)}\longrightarrow\dots.
    \end{equation}
\end{definition}
For this to be functorial, we would expect this to be coordinate independent, at least at the level of derived categories. As a first step, we study the cohomology of the complex modulo $(1-q^{m})$ -- that is, at specalizations to roots of unity. 

If $m=1$, then $\Hcal_{(R,\square)}/(1-q)\cong R$ and all differentials are zero, so 
\begin{equation}\label{eqn: de Rham complex at trivial root of unity}
    H^{i}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)\cong R^{\oplus\binom{d}{i}}\cong \Omega^{i}_{R/\ZZ}
\end{equation}
and is therefore independent of coordinates since the middle term is so. 
\begin{remark}\label{rmk: Bockstein operator}
    While \emph{a priori} we only have a isomorphism to a free module of a certain rank, there is additonal structure that allows us to identify this with the module of K\"{a}hler differentials: the Bockstein map associated to the triangle 
    {\footnotesize 
    $$q\dash\HHdg_{(R,\square)}/(1-q)\xrightarrow{\times(1-q)}q\dash\HHdg_{(R,\square)}/(1-q)^{2}\longrightarrow q\dash\HHdg_{(R,\square)}/(1-q)\longrightarrow \left(q\dash\HHdg_{(R,\square)}/(1-q)\right)[1]$$
    \normalsize}inducing 
    $$H^{i}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)\longrightarrow H^{i+1}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)$$
    which gives a derivation 
    $$H^{0}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)\longrightarrow H^{1}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)$$
    and hence an isomorphism $H^{1}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)\to\Omega^{1}_{R/\ZZ}$. In addition, the ring structure on cohomology induces the structure of a commutative differential graded algebra on $H^{\bullet}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)$ and this structure is in fact independent of coordinates on the nose and not just up to quasi-isomorphism.
\end{remark}

For general $m$, $H^{\bullet}\left(q\dash\HHdg_{(R,\square)}/(1-q^{m})\right)$ has the strucuture of a commutative differential graded algebra that is coordinate independent. 
\begin{theorem}[Wagner; {\cite[Prop. 5.7]{WagnerMSThesis}}]\label{thm: surjection from q witt vectors}
    Let $R$ be a smooth framed $\ZZ$-algebra. There is a canonical surjection 
    $$W_{m}(R)[q]/(1-q^{m})^{\bullet}\longrightarrow H^{0}\left(q\dash\HHdg_{(R,\square)}/(1-q^{m})\right)$$
    inducing 
    $$\Omega_{W_{m}(R)[q]/(1-q^{m})}\longrightarrow H^{\bullet}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)$$ 
    which is coordinate independent, degreewise surjective, and with kernel independent of coordinates. 
\end{theorem}
\begin{proof}[Proof Outline]
    For every commutative differential graded algebra $B$ receiving a map from a commutative ring $A$ in 0th cohomology, there is an induced map from the initial commutative differential graded algebra generated by $A$ to $B$ -- the latter being the de Rham complex. 
\end{proof}
This produces a description of $H^{i}\left(q\dash\HHdg_{(R,\square)}/(1-q)\right)$ that is visibly independent of coordinates, being the quotient of coordinate-independent objects. 

In fact we can do better. For any $R$, there is a notion of $q$-Witt vectors $q\dash W_{m}(R)$ and $q$-de Rham-Witt complexes $q\dash W_{m}\Omega_{R}$ which is a commutative differential graded algebra with first term given by the $q$-Witt vectors $q\dash W_{m}(R)$ isomorphic to the complex $H^{\bullet}\left(q\dash\HHdg_{(R,\square)}/(1-q^{m})\right)$ as a commutative differential graded algebra. 
\begin{theorem}[Wagner; {\cite[Thm. 5.7]{WagnerMSThesis}}]\label{thm: }
    Let $R$ be a smooth framed $\ZZ$-algebra. There is an isomorphism 
    $$q\dash W_{m}\Omega_{R}^{\bullet}\longrightarrow H^{\bullet}\left(q\dash\HHdg_{(R,\square)}/(1-q^{m})\right)$$
    where $q\dash W_{m}\Omega^{\bullet}_{R}$ is the $q$-de Rham-Witt complex.
\end{theorem}
\begin{remark}
    This is related to the classical construction of the de Rham-Witt complex, though the sense in which the preceding constructions are $q$-deformations are quite subtle. 
\end{remark}
\begin{remark}
    One can often reduce to the case of computing on the torus, since many of the constructions ``commute with \'{e}tale maps'' in the sense that they are preserved under \'{e}tale base change. 
\end{remark}
Based on this, one might hope that these complexes are independent of coordinates. 
\begin{example}\label{ex: q-Habiro-Hodge cohomology of torus}
    Let $R=\ZZ[T^{\pm}]$. The $q$-Habiro-Hodge complex is given by 
    $$\ZZ[q][T^{\pm}]/(1-q^{m})\xrightarrow{\gamma-1}\ZZ[q][T^{\pm}]/(1-q^{m})$$
    by $T^{k}\mapsto(q^{k}-1)T^{k}$. We can compute the kernel of this map -- the 0th cohomology -- by noting that the map preserves the degree of $T$, we can compute the kernel in each degree to see that it is given by 
    $$\bigoplus_{k\in\ZZ}\left(\frac{\frac{q^{m}-1}{q^{\gcd(k,m)}-1}\ZZ[q]}{(q^{m}-1)\ZZ[q]}\right)T^{k}\cong\bigoplus_{k\in\ZZ}\left(\ZZ[q]/(1-q^{\gcd(k,m)})\ZZ[q]\right)T^{k}.$$
    We similarly compute first cohomology to see it is also given by 
    $$\bigoplus_{k\in\ZZ}\left(\ZZ[q]/(1-q^{\gcd(k,m)})\ZZ[q]\right)T^{k}.$$
    Indeed, when $m=p$ is prime, the 0th cohomology is a subring of $\ZZ[q][T^{\pm}]/(1-q^{p})$ (hence a subring of $\ZZ[T^{\pm}]\times\ZZ[\zeta_{p}][T^{\pm p}]\subseteq\ZZ[T^{\pm}]\times\ZZ[\zeta_{p}][T^{\pm}]$) and is generated by $T^{p}$ and $[p]_{q}T^{i}$ for $1\leq i\leq p-1$. 
\end{example}
The computations of \Cref{ex: q-Habiro-Hodge cohomology of torus} is suggestive of a connection to Witt vectors since the cohomology lies in the product of rings $\ZZ[T^{\pm}]\times\ZZ[\zeta_{p}][T^{\pm p}]$. Recall that for a $p$-torsion free ring $R$, the $p$-th Witt vectors $W_{p}(R)$ consists of elements $(x_{0},x_{1},\dots)$ has ghost maps $\gh_{1},\gh_{p}:W_{p}(R)\to R$ by $(x_{0},x_{1},\dots)\mapsto x_{0}$ and $(x_{0},x_{1},\dots)\mapsto x_{0}^{p}+px_{1}$, respectively. The image of $(\gh_{1},\gh_{p}):W_{p}(R)\to R\times R$ consists precisely of those pairs $(x,y)\in R\times R$ where $y\equiv x^{p}\pmod{p}$. 
\begin{proposition}[Wagner]\label{prop: q-Witt vectors}
    Let $R=\ZZ[T^{\pm}]$ with the identity framing and $q\dash\HHdg_{(R,\square)}$ its $q$-Habiro-Hodge complex. There is a canonical embedding 
    $$W_{p}(R)\hookrightarrow H^{0}\left(q\dash\HHdg_{(R,\square)}/(1-q^{p})\right)$$
    rendering the diagram 
    {\footnotesize
    $$% https://q.uiver.app/#q=WzAsNyxbMSwxLCJIXnswfVxcbGVmdChxXFxkYXNoXFxISGRnX3soUixcXHNxdWFyZSl9LygxLXFee3B9KVxccmlnaHQpIl0sWzEsMiwiV197cH0oUikiXSxbMywxLCJcXFpaW1Ree1xccG19XVxcdGltZXNcXFpaW1xcemV0YV97cH1dW1Ree1xccG0gcH1dIl0sWzMsMiwiUlxcdGltZXMgUiJdLFswLDMsIih4X3swfSx4X3sxfSkiXSxbNCwzLCIoeF97MH0seF97MH1ee3B9K3B4X3sxfSkiXSxbMCwwLCJcXHZhcnBoaV97cH0oeF97MH0pK1twXV97cX14X3sxfSJdLFsxLDAsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMywiKFxcZ2hfezF9LFxcZ2hfe3B9KSIsMl0sWzMsMl0sWzAsMiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbNCw1LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJtYXBzIHRvIn19fV0sWzQsNiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoibWFwcyB0byJ9fX1dXQ==
    \begin{tikzcd}
        {\varphi_{p}(x_{0})+[p]_{q}x_{1}} \\
        & {H^{0}\left(q\dash\HHdg_{(R,\square)}/(1-q^{p})\right)} && {\ZZ[T^{\pm}]\times\ZZ[\zeta_{p}][T^{\pm p}]} \\
        & {W_{p}(R)} && {R\times R} \\
        {(x_{0},x_{1})} &&&& {(x_{0},x_{0}^{p}+px_{1})}
        \arrow[hook, from=2-2, to=2-4]
        \arrow[hook, from=3-2, to=2-2]
        \arrow["{(\gh_{1},\gh_{p})}"', from=3-2, to=3-4]
        \arrow[from=3-4, to=2-4]
        \arrow[maps to, from=4-1, to=1-1]
        \arrow[maps to, from=4-1, to=4-5]
    \end{tikzcd}$$
    \normalsize}commutative. 
\end{proposition}
\begin{remark}
    On the $q$-Habiro-Hodge cohomologies, we can relate the different specializations by Frobenii and Verschiebungen 
    $$% https://q.uiver.app/#q=WzAsMixbMCwwLCJIXntpfVxcbGVmdChxXFxkYXNoXFxISGRnX3soUixcXHNxdWFyZSl9LygxLXFee21rfSlcXHJpZ2h0KSJdLFsyLDAsIkhee2l9XFxsZWZ0KHFcXGRhc2hcXEhIZGdfeyhSLFxcc3F1YXJlKX0vKDEtcV57bX0pXFxyaWdodCkuIl0sWzAsMSwiRl97a30iLDAseyJvZmZzZXQiOi0xfV0sWzEsMCwiVl97a309XFx0aW1lc1xcZnJhY3sxLXFee21rfX17MS1xXnttfX0iLDAseyJvZmZzZXQiOi0xfV1d
    \begin{tikzcd}
        {H^{i}\left(q\dash\HHdg_{(R,\square)}/(1-q^{mk})\right)} && {H^{i}\left(q\dash\HHdg_{(R,\square)}/(1-q^{m})\right).}
        \arrow["{F_{k}}", shift left, from=1-1, to=1-3]
        \arrow["{V_{k}=\times\frac{1-q^{mk}}{1-q^{m}}}", shift left, from=1-3, to=1-1]
    \end{tikzcd}$$
\end{remark}
More generally, we have the following. 
\begin{proposition}
    Let $R$ be a flat $\ZZ$-algebra. There is a commutative diagram 
    $$% https://q.uiver.app/#q=WzAsNSxbMiwwLCJXX3ttfShSKSJdLFs0LDAsIlxccHJvZF97ZHxtfVIiXSxbNCwxLCJcXHByb2Rfe2R8bX1SW1xcemV0YV97ZH1dIl0sWzIsMSwicVxcZGFzaCBXX3ttfShSKSJdLFswLDEsIldfe219KFIpW3FdLygxLXFee219KSJdLFs0LDMsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6ImVwaSJ9fX1dLFswLDRdLFswLDMsIiIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzAsMSwiKFxcZ2hfe2R9KV97ZHxtfSIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzMsMiwiKHFcXGRhc2hcXGdoX3tkfSlfe2R8bX0iLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsIihSKV97ZH1cXHRvKFJbXFx6ZXRhX3ttL2R9XSlfe20vZH0iLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dXQ==
    \begin{tikzcd}
        && {W_{m}(R)} && {\prod_{d|m}R} \\
        {W_{m}(R)[q]/(1-q^{m})} && {q\dash W_{m}(R)} && {\prod_{d|m}R[\zeta_{d}]}
        \arrow["{(\gh_{d})_{d|m}}", hook, from=1-3, to=1-5]
        \arrow[from=1-3, to=2-1]
        \arrow[hook, from=1-3, to=2-3]
        \arrow["{(R)_{d}\to(R[\zeta_{m/d}])_{m/d}}", hook, from=1-5, to=2-5]
        \arrow[two heads, from=2-1, to=2-3]
        \arrow["{(q\dash\gh_{d})_{d|m}}"', hook, from=2-3, to=2-5]
    \end{tikzcd}$$
    where the Frobenii and Verschiebungen are defined on $q\dash W_{m}(R)$. 
\end{proposition}
\begin{remark}
    On the right, the map takes the $d$th factor of the product $\prod_{d|m}R$ to the $\frac{m}{d}$th factor of the product $\prod_{d|m}R[\zeta_{d}]$. 
\end{remark}
\begin{remark}
    There are no restriction maps on the $q$-Witt vectors $q\dash W_{m}(R)$. 
\end{remark}
This shows that on the level of cohomology, the $q$-Habiro-Hodge complex is coordinate independent after specialization. However, due to a theorem of Wagner, this is the best we can do: there is no way to make the $q$-Habiro-Hodge complex itself coordinate independent in the derived category in such a way that remains coordinate independent on specialization. 
